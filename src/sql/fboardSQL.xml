<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC '-//ibatis.apache.org//DTD Sql Map 2.0//EN' 'http://ibatis.apache.org/dtd/sql-map-2.dtd'>
<sqlMap namespace="fboard">
	<typeAlias alias="fboard" type="fboard.fboardVO" />

	<resultMap id="boardRes" class="fboard">

		<result property="fb_no" column="fb_no" />
		<result property="fb_id" column="fb_id" />
		<result property="fb_subject" column="fb_subject" />
		<result property="fb_readhit" column="fb_readhit" />
		<result property="fb_content" column="fb_content" />
		<result property="fb_regdate" column="fb_regdate" />
		<result property="fb_like" column="fb_like" /> 
	</resultMap>

	<sql id="select-all">
		SELECT * FROM FREEBOARD
	</sql>

	<sql id="where-no">
		where fb_no=#fb_no#
	</sql>

	<select id="selectAll" resultMap="boardRes">
		<include refid="select-all"></include>
		order by fb_no desc
	</select>

	<select id="selectOne" resultMap="boardRes" parameterClass="int">
		<include refid="select-all" />
		<include refid="where-no" />
	</select>
	
	<select id="selectLastNo" resultClass="fboard" parameterClass="int">
			SELECT max(fb_no) as fb_no FROM FREEBOARD 
	</select>
	
		<select id="fboard" resultMap="boardRes" parameterClass="int">
		<include refid="select-all" />
		ORDER BY fb_no DESC
	</select>
	
	<select id="selectfboard" resultMap="boardRes" parameterClass="int">
		<include refid="select-all" />
		ORDER BY fb_no DESC
	</select>
	
	<!-- 좋아요!! -->
	<!-- <select id="like" resultMap="boardRes" parameterClass="int">
		<include refid="select-all" />


	</select> -->
	

	<!-- 검색 -->
	<select id="selectSearchM" resultMap="boardRes" parameterClass="string">
		<include refid="select-all" />
		WHERE MEMBER_ID like #searchKeyword#
		ORDER BY fb_no DESC
	</select>

	<select id="selectSearchT" resultMap="boardRes" parameterClass="string">
		<include refid="select-all" />
		WHERE title like #searchKeyword#
		ORDER BY fb_no DESC
	</select>

	<select id="selectSearchC" resultMap="boardRes" parameterClass="string">
		<include refid="select-all" />
		WHERE content like #searchKeyword#
		ORDER BY fb_no DESC
	</select>
	
	<insert id="insertBoard" parameterClass="fboard">
		INSERT INTO FREEBOARD
		(
		FB_NO,
		FB_ID,
		FB_SUBJECT,
		FB_CONTENT,
		)
		VALUES (
		SEQ_FREEBOARD_NO.NEXTVAL,
		#fb_id#,
		#fb_subject#,
		#fb_content#,
		)
	</insert>

	<update id="updateBoard" parameterClass="fboard">
    		UPDATE FREEBOARD SET FB_SUBJECT = #fb_subject#,
                       		     FB_CONTENT = #fb_content#
		<include refid="where-no" />
   	</update>

	<update id="updateRedhit" parameterClass="fboard">
		UPDATE FREEBOARD SET FB_READHIT = fb_readhit + 1
		<include refid="where-no" />
	</update>
	
	<delete id="deleteBoard" parameterClass="fboard">
			DELETE FROM FREEBOARD 
			<include refid="where-no" />
	</delete>
	
</sqlMap>